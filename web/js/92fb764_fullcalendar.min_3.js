/*!
 * FullCalendar v2.2.3
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):a(jQuery,moment)})(function(ay,aR){function aF(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function aM(a,b){var c=b.longDateFormat("L");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),a.isRTL?c+=" ddd":c="ddd "+c,c}function aA(a){az(af,a)}function az(b){function c(e,d){ay.isPlainObject(d)&&ay.isPlainObject(b[e])&&!aE(e)?b[e]=az({},b[e],d):void 0!==d&&(b[e]=d)}for(var a=1;arguments.length>a;a++){ay.each(arguments[a],c)}return b}function aE(a){return/(Time|Duration)$/.test(a)}function aJ(cu,cy){function cq(b){var d=aR.localeData||aR.langData;return d.call(aR,b)||d.call(aR,"en")}function ct(b){a?cp()&&(cs(),cB(b)):cw()}function cw(){cf=bY.theme?"ui":"fc",cu.addClass("fc"),bY.isRTL?cu.addClass("fc-rtl"):cu.addClass("fc-ltr"),bY.theme?cu.addClass("ui-widget"):cu.addClass("fc-unthemed"),a=ay("<div class='fc-view-container'/>").prependTo(cu),s=new aX(cr,bY),cE=s.render(),cE&&cu.prepend(cE),cz(bY.defaultView),bY.handleWindowResize&&(ch=aY(co,bY.windowResizeDelay),ay(window).resize(ch))}function cC(){ck&&ck.destroy(),s.destroy(),a.remove(),cu.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),ay(window).unbind("resize",ch)}function cp(){return cu.is(":visible")}function cz(b){cB(0,b)}function cB(b,d){cn++,ck&&d&&ck.name!==d&&(s.deactivateButton(ck.name),b9(),ck.start&&ck.destroy(),ck.el.remove(),ck=null),!ck&&d&&(ck=new bP[d](cr),ck.el=ay("<div class='fc-view fc-"+d+"-view' />").appendTo(a),s.activateButton(d)),ck&&(b&&(cg=ck.incrementDate(cg,b)),ck.start&&!b&&cg.isWithin(ck.intervalStart,ck.intervalEnd)||cp()&&(b9(),ck.start&&ck.destroy(),ck.render(cg),b0(),b7(),b1(),cD())),b0(),cn--}function cA(b){return cp()?(b&&cv(),cn++,ck.updateSize(!0),cn--,!0):void 0}function cs(){cp()&&cv()}function cv(){cb="number"==typeof bY.contentHeight?bY.contentHeight:"number"==typeof bY.height?bY.height-(cE?cE.outerHeight(!0):0):Math.round(a.width()/Math.max(bY.aspectRatio,0.5))}function co(b){!cn&&b.target===window&&ck.start&&cA(!0)&&ck.trigger("windowResize",b8)}function cj(){W(),b4()}function cm(){cp()&&(b9(),ck.destroyEvents(),ck.renderEvents(cF),b0())}function W(){b9(),ck.destroyEvents(),b0()}function cD(){!bY.lazyFetching||b5(ck.start,ck.end)?b4():cm()}function b4(){cd(ck.start,ck.end)}function b6(b){cF=b,cm()}function O(){cm()}function b7(){s.updateTitle(ck.title)}function b1(){var b=cr.getNow();b.isWithin(ck.intervalStart,ck.intervalEnd)?s.disableButton("today"):s.enableButton("today")}function cl(b,d){b=cr.moment(b),d=d?cr.moment(d):b.hasTime()?b.clone().add(cr.defaultTimedEventDuration):b.clone().add(cr.defaultAllDayEventDuration),ck.select(b,d)}function bX(){ck&&ck.unselect()}function be(){cB(-1)}function bV(){cB(1)}function b3(){cg.add(-1,"years"),cB()}function ci(){cg.add(1,"years"),cB()}function b2(){cg=cr.getNow(),cB()}function bW(b){cg=cr.moment(b),cB()}function ca(b){cg.add(aR.duration(b)),cB()}function e(d,f){var g,b;f&&void 0!==bP[f]||(f=f||"day",g=s.getViewsWithButtons().join(" "),b=g.match(RegExp("\\w+"+bi(f))),b||(b=g.match(/\w+Day/)),f=b?b[0]:"agendaDay"),cg=d,cz(f)}function t(){return cg.clone()}function b9(){a.css({width:"100%",height:a.height(),overflow:"hidden"})}function b0(){a.css({width:"",height:"",overflow:""})}function c(){return cr}function cx(){return ck}function k(b,d){return void 0===d?bY[b]:(("height"==b||"contentHeight"==b||"aspectRatio"==b)&&(bY[b]=d,cA(!0)),void 0)}function cc(b,d){return bY[b]?bY[b].apply(d||b8,Array.prototype.slice.call(arguments,2)):void 0}var cr=this;cy=cy||{};var L,bY=az({},af,cy);L=bY.lang in ah?ah[bY.lang]:ah[af.lang],L&&(bY=az({},af,L,cy)),bY.isRTL&&(bY=az({},af,bz,L||{},cy)),cr.options=bY,cr.render=ct,cr.destroy=cC,cr.refetchEvents=cj,cr.reportEvents=b6,cr.reportEventChange=O,cr.rerenderEvents=cm,cr.changeView=cz,cr.select=cl,cr.unselect=bX,cr.prev=be,cr.next=bV,cr.prevYear=b3,cr.nextYear=ci,cr.today=b2,cr.gotoDate=bW,cr.incrementDate=ca,cr.zoomTo=e,cr.getDate=t,cr.getCalendar=c,cr.getView=cx,cr.option=k,cr.trigger=cc;var bU=aK(cq(bY.lang));if(bY.monthNames&&(bU._months=bY.monthNames),bY.monthNamesShort&&(bU._monthsShort=bY.monthNamesShort),bY.dayNames&&(bU._weekdays=bY.dayNames),bY.dayNamesShort&&(bU._weekdaysShort=bY.dayNamesShort),null!=bY.firstDay){var bZ=aK(bU._week);bZ.dow=bY.firstDay,bU._week=bZ}cr.defaultAllDayEventDuration=aR.duration(bY.defaultAllDayEventDuration),cr.defaultTimedEventDuration=aR.duration(bY.defaultTimedEventDuration),cr.moment=function(){var b;return"local"===bY.timezone?(b=ab.moment.apply(null,arguments),b.hasTime()&&b.local()):b="UTC"===bY.timezone?ab.moment.utc.apply(null,arguments):ab.moment.parseZone.apply(null,arguments),"_locale" in b?b._locale=bU:b._lang=bU,b},cr.getIsAmbigTimezone=function(){return"local"!==bY.timezone&&"UTC"!==bY.timezone},cr.rezoneDate=function(b){return cr.moment(b.toArray())},cr.getNow=function(){var b=bY.now;return"function"==typeof b&&(b=b()),cr.moment(b)},cr.calculateWeekNumber=function(b){var d=bY.weekNumberCalculation;return"function"==typeof d?d(b):"local"===d?b.week():"ISO"===d.toUpperCase()?b.isoWeek():void 0},cr.getEventEnd=function(b){return b.end?b.end.clone():cr.getDefaultEventEnd(b.allDay,b.start)},cr.getDefaultEventEnd=function(b,d){var f=d.clone();return b?f.stripTime().add(cr.defaultAllDayEventDuration):f.add(cr.defaultTimedEventDuration),cr.getIsAmbigTimezone()&&f.stripZone(),f},cr.formatRange=function(b,d,f){return"function"==typeof f&&(f=f.call(cr,bY,bU)),a3(b,d,f,null,bY.isRTL)},cr.formatDate=function(b,d){return"function"==typeof d&&(d=d.call(cr,bY,bU)),bc(b,d)},aT.call(cr,bY);var s,cE,a,cf,ck,cb,ch,cg,b5=cr.isFetchNeeded,cd=cr.fetchEvents,b8=cu[0],cn=0,cF=[];cg=null!=bY.defaultDate?cr.moment(bY.defaultDate):cr.getNow(),cr.getSuggestedViewHeight=function(){return void 0===cb&&cs(),cb},cr.isHeightAuto=function(){return"auto"===bY.contentHeight||"auto"===bY.height}}function aX(y,m){function t(){var a=m.header;return x=m.theme?"ui":"fc",a?w=ay("<div class='fc-toolbar'/>").append(D("left")).append(D("right")).append(D("center")).append('<div class="fc-clear"/>'):void 0}function b(){w.remove()}function D(a){var d=ay('<div class="fc-'+a+'"/>'),c=m.header[a];return c&&ay.each(c.split(" "),function(){var e,f=ay(),g=!0;ay.each(this.split(","),function(s,n){var p,I,H,G,J,E,F,o;"title"==n?(f=f.add(ay("<h2>&nbsp;</h2>")),g=!1):(y[n]?p=function(){y[n]()}:bP[n]&&(p=function(){y.changeView(n)},j.push(n)),p&&(I=a6(m.themeButtonIcons,n),H=a6(m.buttonIcons,n),G=a6(m.defaultButtonText,n),J=a6(m.buttonText,n),E=J?bb(J):I&&m.theme?"<span class='ui-icon ui-icon-"+I+"'></span>":H&&!m.theme?"<span class='fc-icon fc-icon-"+H+"'></span>":bb(G||n),F=["fc-"+n+"-button",x+"-button",x+"-state-default"],o=ay('<button type="button" class="'+F.join(" ")+'">'+E+"</button>").click(function(){o.hasClass(x+"-state-disabled")||(p(),(o.hasClass(x+"-state-active")||o.hasClass(x+"-state-disabled"))&&o.removeClass(x+"-state-hover"))}).mousedown(function(){o.not("."+x+"-state-active").not("."+x+"-state-disabled").addClass(x+"-state-down")}).mouseup(function(){o.removeClass(x+"-state-down")}).hover(function(){o.not("."+x+"-state-active").not("."+x+"-state-disabled").addClass(x+"-state-hover")},function(){o.removeClass(x+"-state-hover").removeClass(x+"-state-down")}),f=f.add(o)))}),g&&f.first().addClass(x+"-corner-left").end().last().addClass(x+"-corner-right").end(),f.length>1?(e=ay("<div/>"),g&&e.addClass("fc-button-group"),e.append(f),d.append(e)):d.append(f)}),d}function k(a){w.find("h2").text(a)}function q(a){w.find(".fc-"+a+"-button").addClass(x+"-state-active")}function B(a){w.find(".fc-"+a+"-button").removeClass(x+"-state-active")}function A(a){w.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(x+"-state-disabled")}function z(a){w.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(x+"-state-disabled")}function C(){return j}var v=this;v.render=t,v.destroy=b,v.updateTitle=k,v.activateButton=q,v.deactivateButton=B,v.disableButton=A,v.enableButton=z,v.getViewsWithButtons=C;var x,w=ay(),j=[]}function aT(cd){function ci(a,b){return !b1||a.clone().stripZone()<b1.clone().stripZone()||b.clone().stripZone()>e.clone().stripZone()}function b9(b,f){b1=b,e=f,ca=[];var g=++ch,a=d.length;t=a;for(var c=0;a>c;c++){b8(d[c],g)}}function b8(a,b){cc(a,function(f){var h,g,j,c=ay.isArray(a.events);if(b==ch){if(f){for(h=0;f.length>h;h++){g=f[h],j=c?g:M(g,a),j&&ca.push.apply(ca,bY(j))}}t--,t||b0(ca)}})}function cc(z,o){var b,G,n=ab.sourceFetchers;for(b=0;n.length>b;b++){if(G=n[b].call(ae,z,b1.clone(),e.clone(),cd.timezone,o),G===!0){return}if("object"==typeof G){return cc(G,o),void 0}}var D=z.events;if(D){ay.isFunction(D)?(b4(),D.call(ae,b1.clone(),e.clone(),cd.timezone,function(a){o(a),b5()})):ay.isArray(D)?o(D):o()}else{var B=z.url;if(B){var A,F=z.success,q=z.error,y=z.complete;A=ay.isFunction(z.data)?z.data():z.data;var w=ay.extend({},A||{}),j=a9(z.startParam,cd.startParam),k=a9(z.endParam,cd.endParam),E=a9(z.timezoneParam,cd.timezoneParam);j&&(w[j]=b1.format()),k&&(w[k]=e.format()),cd.timezone&&"local"!=cd.timezone&&(w[E]=cd.timezone),b4(),ay.ajax(ay.extend({},bH,z,{data:w,success:function(a){a=a||[];var c=bh(F,this,arguments);ay.isArray(c)&&(a=c),o(a)},error:function(){bh(q,this,arguments),o()},complete:function(){bh(y,this,arguments),b5()}}))}else{o()}}}function cf(a){var b=co(a);b&&(d.push(b),t++,b8(b,ch))}function co(c){var f,a,b=ab.sourceNormalizers;if(ay.isFunction(c)||ay.isArray(c)?f={events:c}:"string"==typeof c?f={url:c}:"object"==typeof c&&(f=ay.extend({},c)),f){for(f.className?"string"==typeof f.className&&(f.className=f.className.split(/\s+/)):f.className=[],ay.isArray(f.events)&&(f.origArray=f.events,f.events=ay.map(f.events,function(g){return M(g,f)})),a=0;b.length>a;a++){b[a].call(ae,f)}return f}}function cm(a){d=ay.grep(d,function(b){return !b7(b,a)}),ca=ay.grep(ca,function(b){return !b7(b.source,a)}),b0(ca)}function b7(a,b){return a&&b&&cj(a)==cj(b)}function cj(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function cl(a){a.start=ae.moment(a.start),a.end&&(a.end=ae.moment(a.end)),bZ(a),ck(a),b0(ca)}function ck(b){var f,g,a,c;for(f=0;ca.length>f;f++){if(g=ca[f],g._id==b._id&&g!==b){for(a=0;J.length>a;a++){c=J[a],void 0!==b[c]&&(g[c]=b[c])}}}}function cb(b,g){var h,a,f,c=M(b);if(c){for(h=bY(c),a=0;h.length>a;a++){f=h[a],f.source||(g&&(x.events.push(f),f.source=x),ca.push(f))}return b0(ca),h}return[]}function ce(b){var c,a;for(null==b?b=function(){return !0}:ay.isFunction(b)||(c=b+"",b=function(f){return f._id==c}),ca=ay.grep(ca,b,!0),a=0;d.length>a;a++){ay.isArray(d[a].events)&&(d[a].events=ay.grep(d[a].events,b,!0))}b0(ca)}function b6(a){return ay.isFunction(a)?ay.grep(ca,a):null!=a?(a+="",ay.grep(ca,function(b){return b._id==a})):ca}function b4(){b2++||C("loading",null,!0,R())}function b5(){--b2||C("loading",null,!1,R())}function M(g,j){var h,k,f,b,m={};if(cd.eventDataTransform&&(g=cd.eventDataTransform(g)),j&&j.eventDataTransform&&(g=j.eventDataTransform(g)),ay.extend(m,g),j&&(m.source=j),m._id=g._id||(void 0===g.id?"_fc"+bN++:g.id+""),m.className=g.className?"string"==typeof g.className?g.className.split(/\s+/):g.className:[],h=g.start||g.date,k=g.end,au(h)&&(h=aR.duration(h)),au(k)&&(k=aR.duration(k)),g.dow||aR.isDuration(h)||aR.isDuration(k)){m.start=h?aR.duration(h):null,m.end=k?aR.duration(k):null,m._recurring=!0}else{if(h&&(h=ae.moment(h),!h.isValid())){return !1}k&&(k=ae.moment(k),k.isValid()||(k=null)),f=g.allDay,void 0===f&&(b=a9(j?j.allDayDefault:void 0,cd.allDayDefault),f=void 0!==b?b:!(h.hasTime()||k&&k.hasTime())),cn(h,k,f,m)}return m}function cn(b,f,a,c){a?(b.hasTime()&&b.stripTime(),f&&f.hasTime()&&f.stripTime()):(b.hasTime()||(b=ae.rezoneDate(b)),f&&!f.hasTime()&&(f=ae.rezoneDate(f))),f&&b>=f&&(f=null),c.allDay=a,c.start=b,c.end=f||null,cd.forceEventDuration&&!c.end&&(c.end=bU(c)),aS(c)}function bY(v,j,m){var b,B,g,k,z,y,w,A,p,q=[];if(j=j||b1,m=m||e,v){if(v._recurring){if(B=v.dow){for(b={},g=0;B.length>g;g++){b[B[g]]=!0}}for(k=j.clone().stripTime();k.isBefore(m);){(!b||b[k.day()])&&(z=v.start,y=v.end,w=k.clone(),A=null,z&&(w=w.time(z)),y&&(A=k.clone().time(y)),p=ay.extend({},v),cn(w,A,!z&&!y,p),q.push(p)),k.add(1,"days")}}else{q.push(v)}}return q}function bZ(u,k,g){var j,b,v,f,h=u._allDay,q=u._start,p=u._end,m=!1;return k||g||(k=u.start,g=u.end),j=u.allDay!=h?u.allDay:!(k||g).hasTime(),j&&(k&&(k=k.clone().stripTime()),g&&(g=g.clone().stripTime())),k&&(b=j?bw(k,q.clone().stripTime()):bw(k,q)),j!=h?m=!0:g&&(v=bw(g||ae.getDefaultEventEnd(j,k||q),k||q).subtract(bw(p||ae.getDefaultEventEnd(h,q),q))),f=K(b6(u._id),m,j,b,v),{dateDelta:b,durationDelta:v,undo:f}}function K(j,f,h,g,k){var c=ae.getIsAmbigTimezone(),b=[];return ay.each(j,function(i,q){var r=q._allDay,a=q._start,l=q._end,n=null!=h?h:r,m=a.clone(),o=!f&&l?l.clone():null;n?(m.stripTime(),o&&o.stripTime()):(m.hasTime()||(m=ae.rezoneDate(m)),o&&!o.hasTime()&&(o=ae.rezoneDate(o))),o||!cd.forceEventDuration&&!+k||(o=ae.getDefaultEventEnd(n,m)),m.add(g),o&&o.add(g).add(k),c&&(+g||+k)&&(m.stripZone(),o&&o.stripZone()),q.allDay=n,q.start=m,q.end=o,aS(q),b.push(function(){q.allDay=r,q.start=a,q.end=l,aS(q)})}),function(){for(var a=0;b.length>a;a++){b[a]()}}}function bV(){var f,a=cd.businessHours,c={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},b=ae.getView();return a&&(f="object"==typeof a?ay.extend({},c,a):c),f?bY(M(f),b.start,b.end):[]}function cg(b,g,a){var f=b.source||{},c=a9(b.constraint,f.constraint,cd.eventConstraint),h=a9(b.overlap,f.overlap,cd.eventOverlap);return be(g,a,c,h,b)}function Q(a,b){return be(a,b,cd.selectConstraint,cd.selectOverlap)}function bX(b,c,f){var a;return f&&(a=bY(M(f))[0])?cg(a,b,c):Q(b,c)}function be(q,k,g,j,b){var u,f,h,p,m;if(q=q.clone().stripZone(),k=k.clone().stripZone(),null!=g){for(u=b3(g),f=!1,h=0;u.length>h;h++){if(cp(u[h],q,k)){f=!0;break}}if(!f){return !1}}for(h=0;ca.length>h;h++){if(p=ca[h],(!b||b._id!==p._id)&&bW(p,q,k)){if(j===!1){return !1}if("function"==typeof j&&!j(p,b)){return !1}if(b){if(m=a9(p.overlap,(p.source||{}).overlap),m===!1){return !1}if("function"==typeof m&&!m(b,p)){return !1}}}}return !0}function b3(a){return"businessHours"===a?bV():"object"==typeof a?bY(M(a)):b6(a)}function cp(b,f,g){var a=b.start.clone().stripZone(),c=ae.getEventEnd(b).stripZone();return f>=a&&c>=g}function bW(b,f,g){var a=b.start.clone().stripZone(),c=ae.getEventEnd(b).stripZone();return c>f&&g>a}var ae=this;ae.isFetchNeeded=ci,ae.fetchEvents=b9,ae.addEventSource=cf,ae.removeEventSource=cm,ae.updateEvent=cl,ae.renderEvent=cb,ae.removeEvents=ce,ae.clientEvents=b6,ae.mutateEvent=bZ;var b1,e,C=ae.trigger,R=ae.getView,b0=ae.reportEvents,bU=ae.getEventEnd,x={events:[]},d=[x],ch=0,t=0,b2=0,ca=[];ay.each((cd.events?[cd.events]:[]).concat(cd.eventSources||[]),function(a,b){var c=co(b);c&&d.push(c)});var J=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];ae.getBusinessHoursEvents=bV,ae.isEventAllowedInRange=cg,ae.isSelectionAllowedInRange=Q,ae.isExternalDragAllowedInRange=bX}function aS(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}function ax(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function aN(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function aQ(){ay("body").addClass("fc-not-allowed")}function aP(){ay("body").removeClass("fc-not-allowed")}function aD(j,f,h){var b=Math.floor(f/j.length),p=Math.floor(f-b*(j.length-1)),d=[],g=[],m=[],k=0;aG(j),j.each(function(l,c){var e=l===j.length-1?p:b,a=ay(c).outerHeight(!0);e>a?(d.push(c),g.push(a),m.push(ay(c).height())):k+=a}),h&&(f-=k,b=Math.floor(f/d.length),p=Math.floor(f-b*(d.length-1))),ay(d).each(function(o,s){var l=o===d.length-1?p:b,r=g[o],q=m[o],a=l-(r-q);l>r&&ay(s).height(a)})}function aG(a){a.height("")}function aw(a){var b=0;return a.find("> *").each(function(f,c){var d=ay(c).outerWidth();d>b&&(b=d)}),b++,a.width(b),b}function at(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight?!0:(av(a),!1)}function av(a){a.height("").removeClass("fc-scroller")}function a8(b){var c=b.css("position"),a=b.parents().filter(function(){var d=ay(this);return/(auto|scroll)/.test(d.css("overflow")+d.css("overflow-y")+d.css("overflow-x"))}).eq(0);return"fixed"!==c&&a.length?a:ay(b[0].ownerDocument||document)}function aW(b){var f=b.offset().left,g=f+b.width(),a=b.children(),d=a.offset().left,c=d+a.outerWidth();return{left:d-f,right:g-c}}function bs(a){return 1==a.which&&!a.ctrlKey}function bt(c,g,j,b){var f,d,h,a;return g>j&&b>c?(c>=j?(f=c.clone(),h=!0):(f=j.clone(),h=!1),b>=g?(d=g.clone(),a=!0):(d=b.clone(),a=!1),{start:f,end:d,isStart:h,isEnd:a}):void 0}function a6(b,d){if(b=b||{},void 0!==b[d]){return b[d]}for(var f,a=d.split(/(?=[A-Z])/),c=a.length-1;c>=0;c--){if(f=b[a[c].toLowerCase()],void 0!==f){return f}}return b["default"]}function bw(a,b){return aR.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function bo(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function au(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function aK(a){var b=function(){};return b.prototype=a,new b}function bh(d,f,a){if(ay.isFunction(d)&&(d=[d]),d){var c,b;for(c=0;d.length>c;c++){b=d[c].apply(f,a)||b}return b}}function a9(){for(var a=0;arguments.length>a;a++){if(void 0!==arguments[a]){return arguments[a]}}}function bb(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function br(a){return a.replace(/&.*?;/g,"")}function bi(a){return a.charAt(0).toUpperCase()+a.slice(1)}function ar(a,b){return a-b}function aY(b,f){var h,a,d,c,g=function(){var e=+new Date-c;f>e&&e>0?h=setTimeout(g,f-e):(h=null,b.apply(d,a),h||(d=a=null))};return function(){d=this,a=arguments,c=+new Date,h||(h=setTimeout(g,f))}}function bq(f,h,b){var p,e,g,m,k=f[0],j=1==f.length&&"string"==typeof k;return aR.isMoment(k)?(m=aR.apply(null,f),by(k,m)):bo(k)||void 0===k?m=aR.apply(null,f):(p=!1,e=!1,j?bn.test(k)?(k+="-01",f=[k],p=!0,e=!0):(g=aq.exec(k))&&(p=!g[5],e=!0):ay.isArray(k)&&(e=!0),m=h?aR.utc.apply(aR,f):aR.apply(null,f),p?(m._ambigTime=!0,m._ambigZone=!0):b&&(e?m._ambigZone=!0:j&&m.zone(k))),m._fullCalendar=!0,m}function bf(b,f){var g,a=[],d=!1,c=!1;for(g=0;b.length>g;g++){a.push(ab.moment.parseZone(b[g])),d=d||a[g]._ambigTime,c=c||a[g]._ambigZone}for(g=0;a.length>g;g++){d&&!f?a[g].stripTime():c&&a[g].stripZone()}return a}function by(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function a1(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function a4(a,b){return am.format.call(a,b)}function bc(a,b){return bx(a,a2(b))}function bx(b,c){var d,a="";for(d=0;c.length>d;d++){a+=bl(b,c[d])}return a}function bl(b,c){var d,a;return"string"==typeof c?c:(d=c.token)?ak[d]?ak[d](b):a4(b,d):c.maybe&&(a=bx(b,c.maybe),a.match(/[1-9]/))?a:""}function a3(b,f,g,a,d){var c;return b=ab.moment.parseZone(b),f=ab.moment.parseZone(f),c=(b.localeData||b.lang).call(b),g=c.longDateFormat(g)||g,a=a||" - ",a0(b,f,a2(g),a,d)}function a0(A,v,j,m,b){var B,g,k,y,x="",w="",z="",p="",q="";for(g=0;j.length>g&&(B=aL(A,v,j[g]),B!==!1);g++){x+=B}for(k=j.length-1;k>g&&(B=aL(A,v,j[k]),B!==!1);k--){w=B+w}for(y=g;k>=y;y++){z+=bl(A,j[y]),p+=bl(v,j[y])}return(z||p)&&(q=b?p+m+z:z+m+p),x+q+w}function aL(b,d,f){var a,c;return"string"==typeof f?f:(a=f.token)&&(c=bp[a.charAt(0)],c&&b.isSame(d,c))?a4(b,a):!1}function a2(a){return a in ag?ag[a]:ag[a]=bI(a)}function bI(b){for(var c,d=[],a=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;c=a.exec(b);){c[1]?d.push(c[1]):c[2]?d.push({maybe:bI(c[2])}):c[3]?d.push({token:c[3]}):c[5]&&d.push(c[5])}return d}function aC(a){this.options=a||{}}function a5(a){this.grid=a}function bj(a){this.coordMaps=a}function ba(a,b){this.coordMap=a,this.options=b||{}}function bk(a,b){return a||b?a&&b?a.grid===b.grid&&a.row===b.row&&a.col===b.col:!1:!0}function bu(a,b){this.options=b=b||{},this.sourceEl=a,this.parentEl=b.parentEl?ay(b.parentEl):a.parent()}function ac(a){this.view=a}function bm(a){ac.call(this,a),this.coordMap=new a5(this),this.elsByFill={}}function aH(a){var b=bG(a);return"background"===b||"inverse-background"===b}function bQ(a){return"inverse-background"===bG(a)}function bG(a){return a9((a.source||{}).rendering,a.rendering)}function aO(b){var c,d,a={};for(c=0;b.length>c;c++){d=b[c],(a[d._id]||(a[d._id]=[])).push(d)}return a}function bO(a,b){return a.eventStartMS-b.eventStartMS}function bB(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}function aB(a){bm.call(this,a)}function al(b,c){var d,a;for(d=0;c.length>d;d++){if(a=c[d],a.leftCol<=b.rightCol&&a.rightCol>=b.leftCol){return !0}}return !1}function aU(a,b){return a.leftCol-b.leftCol}function bd(a){bm.call(this,a)}function bM(b){var c,d,a;if(b.sort(bB),c=bC(b),ao(c),d=c[0]){for(a=0;d.length>a;a++){bE(d[a])}for(a=0;d.length>a;a++){ap(d[a],0,0)}}}function bC(b){var d,f,a,c=[];for(d=0;b.length>d;d++){for(f=b[d],a=0;c.length>a&&bJ(f,c[a]).length;a++){}f.level=a,(c[a]||(c[a]=[])).push(f)}return c}function ao(b){var f,g,a,d,c;for(f=0;b.length>f;f++){for(g=b[f],a=0;g.length>a;a++){for(d=g[a],d.forwardSegs=[],c=f+1;b.length>c;c++){bJ(d,b[c],d.forwardSegs)}}}}function bE(b){var d,f,a=b.forwardSegs,c=0;if(void 0===b.forwardPressure){for(d=0;a.length>d;d++){f=a[d],bE(f),c=Math.max(c,1+f.forwardPressure)}b.forwardPressure=c}}function ap(b,d,f){var a,c=b.forwardSegs;if(void 0===b.forwardCoord){for(c.length?(c.sort(bT),ap(c[0],d+1,f),b.forwardCoord=c[0].backwardCoord):b.forwardCoord=1,b.backwardCoord=b.forwardCoord-(b.forwardCoord-f)/(d+1),a=0;c.length>a;a++){ap(c[a],0,b.forwardCoord)}}}function bJ(b,c,d){d=d||[];for(var a=0;c.length>a;a++){ai(b,c[a])&&d.push(c[a])}return d}function ai(a,b){return a.bottom>b.top&&a.top<b.bottom}function bT(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||bB(a,b)}function a7(W){function ae(a){var b=z[a];return ay.isPlainObject(b)&&!aE(a)?a6(b,T.name):b}function U(a,b){return W.trigger.apply(W,[a,b||T].concat(Array.prototype.slice.call(arguments,2),[T]))}function R(a){var b=a.source||{};return a9(a.startEditable,b.startEditable,ae("eventStartEditable"),a.editable,b.editable,ae("editable"))}function Y(a){var b=a.source||{};return a9(a.durationEditable,b.durationEditable,ae("eventDurationEditable"),a.editable,b.editable,ae("editable"))}function bZ(b,d,a,c){var f=W.mutateEvent(d,a,null);U("eventDrop",b,d,f.dateDelta,function(){f.undo(),A()},c,{}),A()}function bX(b,d,a,c){var f=W.mutateEvent(d,null,a);U("eventResize",b,d,f.durationDelta,function(){f.undo(),A()},c,{}),A()}function bW(a){return aR.isMoment(a)&&(a=a.day()),K[a]}function N(){return o}function be(b,c,d){var a=b.clone();for(c=c||1;K[(a.day()+(d?c:0)+7)%7];){a.add(c,"days")}return a}function bV(){var a=bU.apply(null,arguments),b=V(a),c=X(b);return c}function bU(b,f){var g=T.colCnt,a=I?-1:1,d=I?g-1:0;"object"==typeof b&&(f=b.col,b=b.row);var c=b*g+(f*a+d);return c}function V(a){var b=T.start.day();return a+=q[b],7*Math.floor(a/o)+b0[(a%o+o)%o]-b}function X(a){return T.start.clone().add(a,"days")}function J(b){var c=t(b),d=B(c),a=e(d);return a}function t(a){return a.clone().stripTime().diff(T.start,"days")}function B(a){var b=T.start.day();return a+=b,Math.floor(a/7)*o+q[(a%7+7)%7]-q[b]}function e(b){var f=T.colCnt,g=I?-1:1,a=I?f-1:0,d=Math.floor(b/f),c=(b%f+f)%f*g+a;return{row:d,col:c}}function bY(x,b2){for(var G=T.rowCnt,M=T.colCnt,E=[],C=O(x,b2),F=t(C.start),L=t(C.end),b6=B(F),b4=B(L)-1,b3=0;G>b3;b3++){var w=b3*M,P=w+M-1,b1=Math.max(b6,w),S=Math.min(b4,P);if(S>=b1){var H=e(b1),p=e(S),b5=[H.col,p.col].sort(ar),y=V(b1)==F,k=V(S)+1==L;E.push({row:b3,leftCol:b5[0],rightCol:b5[1],isStart:y,isEnd:k})}}return E}function O(b,d){var f,a,c=b.clone().stripTime();return d&&(f=d.clone().stripTime(),a=+d.time(),a&&a>=Z&&f.add(1,"days")),(!d||c>=f)&&(f=c.clone().add(1,"days")),{start:c,end:f}}function Q(a){var b=O(a.start,a.end);return b.end.diff(b.start,"days")>1}var T=this;T.calendar=W,T.opt=ae,T.trigger=U,T.isEventDraggable=R,T.isEventResizable=Y,T.eventDrop=bZ,T.eventResize=bX;var A=W.reportEventChange,z=W.options,Z=aR.duration(z.nextDayThreshold);T.init(),T.getEventTimeText=function(a,d){var c,b;return"object"==typeof a&&"object"==typeof d?(c=a,b=d,d=arguments[2]):(c=a.start,b=a.end),d=d||ae("timeFormat"),b&&ae("displayEventEnd")?W.formatRange(c,b,d):W.formatDate(c,d)},T.isHiddenDay=bW,T.skipHiddenDays=be,T.getCellsPerWeek=N,T.dateToCell=J,T.dateToDayOffset=t,T.dayOffsetToCellOffset=B,T.cellOffsetToCell=e,T.cellToDate=bV,T.cellToCellOffset=bU,T.cellOffsetToDayOffset=V,T.dayOffsetToDate=X,T.rangeToSegments=bY,T.isMultiDayEvent=Q;var o,j=ae("hiddenDays")||[],K=[],q=[],b0=[],I=ae("isRTL");(function(){ae("weekends")===!1&&j.push(0,6);for(var a=0,b=0;7>a;a++){q[a]=b,K[a]=-1!=ay.inArray(a,j),K[a]||(b0[b]=a,b++)}if(o=b,!o){throw"invalid hiddenDays"}})()}function an(f){var b,d,c,e,a=ab.dataAttrPrefix;return a&&(a+="-"),b=f.data(a+"event")||null,b&&(b="object"==typeof b?ay.extend({},b):{},d=b.start,null==d&&(d=b.time),c=b.duration,e=b.stick,delete b.start,delete b.time,delete b.duration,delete b.stick),null==d&&(d=f.data(a+"start")),null==d&&(d=f.data(a+"time")),null==c&&(c=f.data(a+"duration")),null==e&&(e=f.data(a+"stick")),d=null!=d?aR.duration(d):null,c=null!=c?aR.duration(c):null,e=Boolean(e),{eventProps:b,startTime:d,duration:c,stick:e}}function aI(a){a7.call(this,a),this.dayGrid=new aB(this),this.coordMap=this.dayGrid.coordMap}function bK(a){aI.call(this,a)}function bg(a){aI.call(this,a)}function bF(a){aI.call(this,a)}function bS(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function ad(a,b){return b.longDateFormat("LT").replace(/\s*a$/i,"")}function bR(a){a7.call(this,a),this.timeGrid=new bd(this),this.opt("allDaySlot")?(this.dayGrid=new aB(this),this.coordMap=new bj([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function aj(a){bR.call(this,a)}function aV(a){bR.call(this,a)}var af={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:aM,day:"dddd"},timeFormat:{"default":aF},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},ah={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},bz={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},ab=ay.fullCalendar={version:"2.2.3"},bP=ab.views={};ay.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),a=this;return this.each(function(f,e){var g,d=ay(e),h=d.data("fullCalendar");"string"==typeof b?h&&ay.isFunction(h[b])&&(g=h[b].apply(h,c),f||(a=g),"destroy"===b&&d.removeData("fullCalendar")):h||(h=new aJ(d,b),d.data("fullCalendar",h),h.render())}),a},ab.langs=ah,ab.datepickerLang=function(c,d,a){var b=ah[c];b||(b=ah[c]={}),az(b,{isRTL:a.isRTL,weekNumberTitle:a.weekHeader,titleFormat:{month:a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"},defaultButtonText:{prev:br(a.prevText),next:br(a.nextText),today:br(a.currentText)}}),ay.datepicker&&(ay.datepicker.regional[d]=ay.datepicker.regional[c]=a,ay.datepicker.regional.en=ay.datepicker.regional[""],ay.datepicker.setDefaults(a))},ab.lang=function(a,b){var c;b&&(c=ah[a],c||(c=ah[a]={}),az(c,b||{})),af.lang=a},ab.sourceNormalizers=[],ab.sourceFetchers=[];var bH={dataType:"json",cache:!1},bN=1,aa=["sun","mon","tue","wed","thu","fri","sat"];ab.applyAll=bh;var aZ,bv,bD,bn=/^\s*\d{4}-\d\d$/,aq=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,bL=aR.fn,am=ay.extend({},bL);ab.moment=function(){return bq(arguments)},ab.moment.utc=function(){var a=bq(arguments,!0);return a.hasTime()&&a.utc(),a},ab.moment.parseZone=function(){return bq(arguments,!0,!0)},bL.clone=function(){var a=am.clone.apply(this,arguments);return by(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},bL.time=function(a){if(!this._fullCalendar){return am.time.apply(this,arguments)}if(null==a){return aR.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}this._ambigTime=!1,aR.isDuration(a)||aR.isMoment(a)||(a=aR.duration(a));var b=0;return aR.isDuration(a)&&(b=24*Math.floor(a.asDays())),this.hours(b+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},bL.stripTime=function(){var a=this.toArray();return this.utc(),bv(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0,this},bL.hasTime=function(){return !this._ambigTime},bL.stripZone=function(){var a=this.toArray(),b=this._ambigTime;return this.utc(),bv(this,a),b&&(this._ambigTime=!0),this._ambigZone=!0,this},bL.hasZone=function(){return !this._ambigZone},bL.zone=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),am.zone.apply(this,arguments)},bL.local=function(){var a=this.toArray(),b=this._ambigZone;return am.local.apply(this,arguments),b&&bD(this,a),this},bL.format=function(){return this._fullCalendar&&arguments[0]?bc(this,arguments[0]):this._ambigTime?a4(this,"YYYY-MM-DD"):this._ambigZone?a4(this,"YYYY-MM-DD[T]HH:mm:ss"):am.format.apply(this,arguments)},bL.toISOString=function(){return this._ambigTime?a4(this,"YYYY-MM-DD"):this._ambigZone?a4(this,"YYYY-MM-DD[T]HH:mm:ss"):am.toISOString.apply(this,arguments)},bL.isWithin=function(a,b){var c=bf([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},bL.isSame=function(a,b){var c;return this._fullCalendar?b?(c=bf([this,a],!0),am.isSame.call(c[0],c[1],b)):(a=ab.moment.parseZone(a),am.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):am.isSame.apply(this,arguments)},ay.each(["isBefore","isAfter"],function(a,b){bL[b]=function(d,e){var c;return this._fullCalendar?(c=bf([this,d]),am[b].call(c[0],c[1],e)):am[b].apply(this,arguments)}}),aZ="_d" in aR()&&"updateOffset" in aR,bv=aZ?function(a,b){a._d.setTime(Date.UTC.apply(Date,b)),aR.updateOffset(a,!1)}:a1,bD=aZ?function(a,b){a._d.setTime(+new Date(b[0]||0,b[1]||0,b[2]||0,b[3]||0,b[4]||0,b[5]||0,b[6]||0)),aR.updateOffset(a,!1)}:a1;var ak={t:function(a){return a4(a,"a").charAt(0)},T:function(a){return a4(a,"A").charAt(0)}};ab.formatRange=a3;var bp={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ag={};aC.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var a=this,b=this.options;this.el=ay('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl),this.el.on("click",".fc-close",function(){a.hide()}),b.autoHide&&ay(document).on("mousedown",this.documentMousedownProxy=ay.proxy(this,"documentMousedown"))},documentMousedown:function(a){this.el&&!ay(a.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),ay(document).off("mousedown",this.documentMousedownProxy)},position:function(){var k,g,j,b,v,f=this.options,h=this.el.offsetParent().offset(),q=this.el.outerWidth(),p=this.el.outerHeight(),m=ay(window),t=a8(this.el);b=f.top||0,v=void 0!==f.left?f.left:void 0!==f.right?f.right-q:0,t.is(window)||t.is(document)?(t=m,k=0,g=0):(j=t.offset(),k=j.top,g=j.left),k+=m.scrollTop(),g+=m.scrollLeft(),f.viewportConstrain!==!1&&(b=Math.min(b,k+t.outerHeight()-p-this.margin),b=Math.max(b,k+this.margin),v=Math.min(v,g+t.outerWidth()-q-this.margin),v=Math.max(v,g+this.margin)),this.el.css({top:b-h.top,left:v-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}},a5.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(c,g){var j,b=null,f=this.rows,d=this.cols,h=-1,a=-1;if(this.inBounds(c,g)){for(j=0;f.length>j;j++){if(g>=f[j][0]&&f[j][1]>g){h=j;break}}for(j=0;d.length>j;j++){if(c>=d[j][0]&&d[j][1]>c){a=j;break}}h>=0&&a>=0&&(b={row:h,col:a},b.grid=this.grid,b.date=this.grid.getCellDate(b))}return b},computeBounds:function(){var a;this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return this.containerEl?a>=this.minX&&this.maxX>a&&b>=this.minY&&this.maxY>b:!0}},bj.prototype={coordMaps:null,build:function(){var a,b=this.coordMaps;for(a=0;b.length>a;a++){b[a].build()}},getCell:function(b,d){var f,a=this.coordMaps,c=null;for(f=0;a.length>f&&!c;f++){c=a[f].getCell(b,d)}return c}},ba.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(a){bs(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c,a;this.isListening||(b&&this.options.scroll&&(c=a8(ay(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=aY(ay.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),b&&(a=this.getCell(b),this.origCell=a,this.origDate=a?a.date:null,this.mouseX0=b.pageX,this.mouseY0=b.pageY),ay(document).on("mousemove",this.mousemoveProxy=ay.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=ay.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",b))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a)),this.isDragging&&this.drag(a)},startDrag:function(a){var b;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",a),b=this.getCell(a),b&&this.cellOver(b,!0))},drag:function(a){var b;this.isDragging&&(b=this.getCell(a),bk(b,this.cell)||(this.cell&&this.cellOut(),b&&this.cellOver(b)),this.dragScroll(a))},cellOver:function(a){this.cell=a,this.date=a.date,this.trigger("cellOver",a,a.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(a){this.stopDrag(a),this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",a),this.isDragging=!1)},stopListening:function(a){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),ay(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",a),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a,b=this.scrollEl;b&&(a=b.offset(),this.scrollBounds={top:a.top,left:a.left,bottom:a.top+b.outerHeight(),right:a.left+b.outerWidth()})},dragScroll:function(k){var h,d,g,b,m=this.scrollSensitivity,c=this.scrollBounds,f=0,j=0;c&&(h=(m-(k.pageY-c.top))/m,d=(m-(c.bottom-k.pageY))/m,g=(m-(k.pageX-c.left))/m,b=(m-(c.right-k.pageX))/m,h>=0&&1>=h?f=-1*h*this.scrollSpeed:d>=0&&1>=d&&(f=d*this.scrollSpeed),g>=0&&1>=g?j=-1*g*this.scrollSpeed:b>=0&&1>=b&&(j=b*this.scrollSpeed)),this.setScrollVel(f,j)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ay.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?0>=a.scrollTop()&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1000;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},bu.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(a){this.isFollowing||(this.isFollowing=!0,this.mouseY0=a.pageY,this.mouseX0=a.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),ay(document).on("mousemove",this.mousemoveProxy=ay.proxy(this,"mousemove")))},stop:function(d,f){function a(){this.isAnimating=!1,c.destroyEl(),this.top0=this.left0=null,f&&f()}var c=this,b=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,ay(document).off("mousemove",this.mousemoveProxy),d&&b&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:b,complete:a})):a())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},ac.prototype={view:null,cellHtml:"<td/>",rowHtml:function(b,f){var h,a,d=this.view,c=this.getHtmlRenderer("cell",b),g="";for(f=f||0,h=0;d.colCnt>h;h++){a=d.cellToDate(f,h),g+=c(f,h,a)}return g=this.bookendCells(g,b,f),"<tr>"+g+"</tr>"},bookendCells:function(k,h,d){var g=this.view,b=this.getHtmlRenderer("intro",h)(d||0),m=this.getHtmlRenderer("outro",h)(d||0),c=g.opt("isRTL"),f=c?m:b,j=c?b:m;return"string"==typeof k?f+k+j:k.prepend(f).append(j)},getHtmlRenderer:function(b,f){var h,a,d,c,g=this.view;return h=b+"Html",f&&(a=f+bi(b)+"Html"),a&&(c=g[a])?d=g:a&&(c=this[a])?d=this:(c=g[h])?d=g:(c=this[h])&&(d=this),"function"==typeof c?function(){return c.apply(d,arguments)||""}:function(){return c||""}}},bm.prototype=aK(ac.prototype),ay.extend(bm.prototype,{el:null,coordMap:null,cellDuration:null,elsByFill:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(){},getCellDate:function(){},getCellDayEl:function(){},rangeToSegs:function(){},bindHandlers:function(){var a=this;this.el.on("mousedown",function(b){ay(b.target).is(".fc-event-container *, .fc-more")||ay(b.target).closest(".fc-popover").length||a.dayMousedown(b)}),this.bindSegHandlers()},dayMousedown:function(p){var j,f,h,b=this,q=this.view,d=q.calendar,g=q.opt("selectable"),m=null,k=new ba(this.coordMap,{scroll:q.opt("dragScroll"),dragStart:function(){q.unselect()},cellOver:function(a,c){k.origDate&&(h=b.getCellDayEl(a),m=[c,k.origDate].sort(ar),j=m[0],f=m[1].clone().add(b.cellDuration),g&&(d.isSelectionAllowedInRange(j,f)?b.renderSelection(j,f):(m=null,aQ())))},cellOut:function(){m=null,b.destroySelection(),aP()},listenStop:function(a){m&&(m[0].isSame(m[1])&&q.trigger("dayClick",h[0],j,a),g&&q.reportSelection(j,f,a)),aP()}});k.mousedown(p)},renderDrag:function(){},destroyDrag:function(){},renderResize:function(){},destroyResize:function(){},renderRangeHelper:function(b,d,f){var a,c=this.view;!d&&c.opt("forceEventDuration")&&(d=c.calendar.getDefaultEventEnd(!b.hasTime(),b)),a=f?aK(f.event):{},a.start=b,a.end=d,a.allDay=!(b.hasTime()||d&&d.hasTime()),a.className=(a.className||[]).concat("fc-helper"),f||(a.editable=!1),this.renderHelper(a,f)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(a,b){this.renderHighlight(a,b)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(a,b){this.renderFill("highlight",this.rangeToSegs(a,b))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(f,h){var b,d=this,c=this[f+"SegEl"],g="",a=[];if(h.length){for(b=0;h.length>b;b++){g+=this.fillSegHtml(f,h[b])}ay(g).each(function(l,k){var m=h[l],j=ay(k);c&&(j=c.call(d,m,j)),j&&(j=ay(j),j.is(d.fillSegTag)&&(m.el=j,a.push(m)))})}return a},fillSegTag:"div",fillSegHtml:function(b,f){var g=this[b+"SegClasses"],a=this[b+"SegStyles"],d=g?g.call(this,f):[],c=a?a.call(this,f):"";return"<"+this.fillSegTag+(d.length?' class="'+d.join(" ")+'"':"")+(c?' style="'+c+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(b,f,g){var a=this.view,d=a.calendar,c=a.opt("columnFormat");return'<th class="fc-day-header '+a.widgetHeaderClass+" fc-"+aa[g.day()]+'">'+bb(d.formatDate(g,c))+"</th>"},bgCellHtml:function(b,d,f){var a=this.view,c=this.getDayClasses(f);return c.unshift("fc-day",a.widgetContentClass),'<td class="'+c.join(" ")+'" data-date="'+f.format()+'"></td>'},getDayClasses:function(b){var c=this.view,d=c.calendar.getNow().stripTime(),a=["fc-"+aa[b.day()]];return"month"===c.name&&b.month()!=c.intervalStart.month()&&a.push("fc-other-month"),b.isSame(d,"day")?a.push("fc-today",c.highlightStateClass):d>b?a.push("fc-past"):a.push("fc-future"),a}}),ay.extend(bm.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(b){var f,g,a=this.eventsToSegs(b),d=[],c=[];for(f=0;a.length>f;f++){g=a[f],aH(g.event)?d.push(g):c.push(g)}d=this.renderBgSegs(d)||d,c=this.renderFgSegs(c)||c,this.segs=d.concat(c)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(d,g){var a,c=this.view,b="",f=[];if(d.length){for(a=0;d.length>a;a++){b+=this.fgSegHtml(d[a],g)}ay(b).each(function(k,h){var j=d[k],e=c.resolveEventEl(j.event,ay(h));e&&(e.data("fc-seg",j),j.el=e,f.push(j))})}return f},fgSegHtml:function(){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegStyles:function(c){var g=this.view,j=c.event,b=j.source||{},f=j.color,d=b.color,h=g.opt("eventColor"),a=j.backgroundColor||f||b.backgroundColor||d||g.opt("eventBackgroundColor")||h;return a?"background-color:"+a:""},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var a=this,b=this.view;ay.each({mouseenter:function(c,d){a.triggerSegMouseover(c,d)},mouseleave:function(c,d){a.triggerSegMouseout(c,d)},click:function(c,d){return b.trigger("eventClick",this,c.event,d)},mousedown:function(c,d){ay(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)?a.segResizeMousedown(c,d):b.isEventDraggable(c.event)&&a.segDragMousedown(c,d)}},function(d,c){a.el.on(d,".fc-event-container > *",function(f){var e=ay(this).data("fc-seg");return !e||a.isDraggingSeg||a.isResizingSeg?void 0:c.call(this,e,f)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(u,k){var g,j,b=this,v=this.view,f=v.calendar,h=u.el,q=u.event,p=new bu(u.el,{parentEl:v.el,opacity:v.opt("dragOpacity"),revertDuration:v.opt("dragRevertDuration"),zIndex:2}),m=new ba(v.coordMap,{distance:5,scroll:v.opt("dragScroll"),listenStart:function(a){p.hide(),p.start(a)},dragStart:function(a){b.triggerSegMouseout(u,a),b.isDraggingSeg=!0,v.hideEvent(q),v.trigger("eventDragStart",h[0],q,a,{})},cellOver:function(i,a){var c=u.cellDate||m.origDate,d=b.computeDraggedEventDates(u,c,a);g=d.start,j=d.end,f.isEventAllowedInRange(q,g,d.visibleEnd)?v.renderDrag(g,j,u)?p.hide():p.show():(g=null,p.show(),aQ())},cellOut:function(){g=null,v.destroyDrag(),p.show(),aP()},dragStop:function(a){var c=g&&!g.isSame(q.start);p.stop(!c,function(){b.isDraggingSeg=!1,v.destroyDrag(),v.showEvent(q),v.trigger("eventDragStop",h[0],q,a,{}),c&&v.eventDrop(h[0],q,g,a)}),aP()},listenStop:function(){p.stop()}});m.mousedown(k)},computeDraggedEventDates:function(w,k,g){var j,b,x,f,h,q=this.view,p=w.event,m=p.start,v=q.calendar.getEventEnd(p);return g.hasTime()===k.hasTime()?(j=bw(g,k),b=m.clone().add(j),x=null===p.end?null:v.clone().add(j),f=p.allDay):(b=g,x=null,f=!g.hasTime()),h=x||q.calendar.getDefaultEventEnd(f,b),{start:b,end:x,visibleEnd:h}},segResizeMousedown:function(w,k){function g(){b.destroyResize(),x.showEvent(q)}var j,b=this,x=this.view,f=x.calendar,h=w.el,q=w.event,p=q.start,m=x.calendar.getEventEnd(q),v=null;j=new ba(this.coordMap,{distance:5,scroll:x.opt("dragScroll"),dragStart:function(a){b.triggerSegMouseout(w,a),b.isResizingSeg=!0,x.trigger("eventResizeStart",h[0],q,a,{})},cellOver:function(c,a){a.isBefore(p)&&(a=p),v=a.clone().add(b.cellDuration),f.isEventAllowedInRange(q,p,v)?v.isSame(m)?(v=null,g()):(b.renderResize(p,v,w),x.hideEvent(q)):(v=null,g(),aQ())},cellOut:function(){v=null,g(),aP()},dragStop:function(a){b.isResizingSeg=!1,g(),aP(),x.trigger("eventResizeStop",h[0],q,a,{}),v&&x.eventResize(h[0],q,v,a)}}),j.mousedown(k)},getSegClasses:function(b,d,f){var a=b.event,c=["fc-event",b.isStart?"fc-start":"fc-not-start",b.isEnd?"fc-end":"fc-not-end"].concat(a.className,a.source?a.source.className:[]);return d&&c.push("fc-draggable"),f&&c.push("fc-resizable"),c},getEventSkinCss:function(p){var j=this.view,f=p.source||{},h=p.color,b=f.color,q=j.opt("eventColor"),d=p.backgroundColor||h||f.backgroundColor||b||j.opt("eventBackgroundColor")||q,g=p.borderColor||h||f.borderColor||b||j.opt("eventBorderColor")||q,m=p.textColor||f.textColor||j.opt("eventTextColor"),k=[];return d&&k.push("background-color:"+d),g&&k.push("border-color:"+g),m&&k.push("color:"+m),k.join(";")},eventsToSegs:function(b,d){var f,a=this.eventsToRanges(b),c=[];for(f=0;a.length>f;f++){c.push.apply(c,this.eventRangeToSegs(a[f],d))}return c},eventsToRanges:function(c){var d=this,a=aO(c),b=[];return ay.each(a,function(f,g){g.length&&b.push.apply(b,bQ(g[0])?d.eventsToInverseRanges(g):d.eventsToNormalRanges(g))}),b},eventsToNormalRanges:function(b){var f,h,a,d,c=this.view.calendar,g=[];for(f=0;b.length>f;f++){h=b[f],a=h.start.clone().stripZone(),d=c.getEventEnd(h).stripZone(),g.push({event:h,start:a,end:d,eventStartMS:+a,eventDurationMS:d-a})}return g},eventsToInverseRanges:function(p){var j,f,h=this.view,b=h.start.clone().stripZone(),q=h.end.clone().stripZone(),d=this.eventsToNormalRanges(p),g=[],m=p[0],k=b;for(d.sort(bO),j=0;d.length>j;j++){f=d[j],f.start>k&&g.push({event:m,start:k,end:f.start}),k=f.end}return q>k&&g.push({event:m,start:k,end:q}),g},eventRangeToSegs:function(b,d){var f,a,c;for(f=d?d(b.start,b.end):this.rangeToSegs(b.start,b.end),a=0;f.length>a;a++){c=f[a],c.event=b.event,c.eventStartMS=b.eventStartMS,c.eventDurationMS=b.eventDurationMS}return f}}),aB.prototype=aK(bm.prototype),ay.extend(aB.prototype,{numbersVisible:!1,cellDuration:aR.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,render:function(c){var d,a=this.view,b="";for(d=0;a.rowCnt>d;d++){b+=this.dayRowHtml(d,c)}this.el.html(b),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(g,h){var f=a.cellToDate(Math.floor(g/a.colCnt),g%a.colCnt);a.trigger("dayRender",null,f,ay(h))}),bm.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(b,c){var d=this.view,a=["fc-row","fc-week",d.widgetContentClass];return c&&a.push("fc-rigid"),'<div class="'+a.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",b)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",b)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},buildCoords:function(d,g){var a,c,b,f=this.view.colCnt;this.dayEls.slice(0,f).each(function(h,i){a=ay(i),c=a.offset().left,h&&(b[1]=c),b=[c],g[h]=b}),b[1]=c+a.outerWidth(),this.rowEls.each(function(h,e){a=ay(e),c=a.offset().top,h&&(b[1]=c),b=[c],d[h]=b}),b[1]=c+a.outerHeight()+this.bottomCoordPadding},getCellDate:function(a){return this.view.cellToDate(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.view.colCnt+a.col)},rangeToSegs:function(a,b){return this.view.rangeToSegments(a,b)},renderDrag:function(b,c,d){var a;return this.renderHighlight(b,c||this.view.calendar.getDefaultEventEnd(!0,b)),d&&!d.el.closest(this.el).length?(this.renderRangeHelper(b,c,d),a=this.view.opt("dragOpacity"),void 0!==a&&this.helperEls.css("opacity",a),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(a,b,c){this.renderHighlight(a,b),this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(d,f){var a,c=[],b=this.eventsToSegs([d]);b=this.renderFgSegEls(b),a=this.renderSegRows(b),this.rowEls.each(function(j,i){var k,h=ay(i),g=ay('<div class="fc-helper-skeleton"><table/></div>');k=f&&f.row===j?f.el.position().top:h.find(".fc-content-skeleton tbody").position().top,g.css("top",k).find("table").append(a[j].tbodyEl),h.append(g),c.push(g[0])}),this.helperEls=ay(c)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(d,g){var a,c,b,f=[];for(g=this.renderFillSegEls(d,g),a=0;g.length>a;a++){c=g[a],b=this.renderFillRow(d,c),this.rowEls.eq(c.row).append(b),f.push(b[0])}return this.elsByFill[d]=ay(f),g},renderFillRow:function(f,h){var b,d,c=this.view.colCnt,g=h.leftCol,a=h.rightCol+1;return b=ay('<div class="fc-'+f.toLowerCase()+'-skeleton"><table><tr/></table></div>'),d=b.find("tr"),g>0&&d.append('<td colspan="'+g+'"/>'),d.append(h.el.attr("colspan",a-g)),c>a&&d.append('<td colspan="'+(c-a)+'"/>'),this.bookendCells(d,f),b}}),ay.extend(aB.prototype,{rowStructs:null,destroyEvents:function(){this.destroySegPopover(),bm.prototype.destroyEvents.apply(this,arguments)},getSegs:function(){return bm.prototype.getSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a){var b=ay.grep(a,function(c){return c.event.allDay});return bm.prototype.renderBgSegs.call(this,b)},renderFgSegs:function(a){var b;return a=this.renderFgSegEls(a),b=this.rowStructs=this.renderSegRows(a),this.rowEls.each(function(d,c){ay(c).find(".fc-content-skeleton > table").append(b[d].tbodyEl)}),a},destroyFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();){a.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(b){var c,d,a=[];for(c=this.groupSegRows(b),d=0;c.length>d;d++){a.push(this.renderSegRow(d,c[d]))}return a},fgSegHtml:function(u,k){var g,j=this.view,b=j.opt("isRTL"),v=u.event,f=j.isEventDraggable(v),h=!k&&v.allDay&&u.isEnd&&j.isEventResizable(v),q=this.getSegClasses(u,f,h),p=this.getEventSkinCss(v),m="";return q.unshift("fc-day-grid-event"),!v.allDay&&u.isStart&&(m='<span class="fc-time">'+bb(j.getEventTimeText(v))+"</span>"),g='<span class="fc-title">'+(bb(v.title||"")||"&nbsp;")+"</span>",'<a class="'+q.join(" ")+'"'+(v.url?' href="'+bb(v.url)+'"':"")+(p?' style="'+p+'"':"")+'><div class="fc-content">'+(b?g+" "+m:m+" "+g)+"</div>"+(h?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(G,z){function C(a){for(;a>x;){H=(b[t-1]||[])[x],H?H.attr("rowspan",parseInt(H.attr("rowspan")||1,10)+1):(H=ay("<td/>"),B.append(H)),j[t][x]=H,b[t][x]=H,x++}}var t,q,x,B,J,I,H,k=this.view,D=k.colCnt,F=this.buildSegLevels(z),E=Math.max(1,F.length),w=ay("<tbody/>"),A=[],j=[],b=[];for(t=0;E>t;t++){if(q=F[t],x=0,B=ay("<tr/>"),A.push([]),j.push([]),b.push([]),q){for(J=0;q.length>J;J++){for(I=q[J],C(I.leftCol),H=ay('<td class="fc-event-container"/>').append(I.el),I.leftCol!=I.rightCol?H.attr("colspan",I.rightCol-I.leftCol+1):b[t][x]=H;I.rightCol>=x;){j[t][x]=H,A[t][x]=I,x++}B.append(H)}}C(D),this.bookendCells(B,"eventSkeleton"),w.append(B)}return{row:G,tbodyEl:w,cellMatrix:j,segMatrix:A,segLevels:F,segs:z}},buildSegLevels:function(b){var d,f,a,c=[];for(b.sort(bB),d=0;b.length>d;d++){for(f=b[d],a=0;c.length>a&&al(f,c[a]);a++){}f.level=a,(c[a]||(c[a]=[])).push(f)}for(a=0;c.length>a;a++){c[a].sort(aU)}return c},groupSegRows:function(b){var c,d=this.view,a=[];for(c=0;d.rowCnt>c;c++){a.push([])}for(c=0;b.length>c;c++){a[b[c].row].push(b[c])}return a}}),ay.extend(aB.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(b){var c,d,a=this.rowStructs||[];for(c=0;a.length>c;c++){this.unlimitRow(c),d=b?"number"==typeof b?b:this.computeRowLevelLimit(c):!1,d!==!1&&this.limitRow(c,d)}},computeRowLevelLimit:function(b){var f,g,a=this.rowEls.eq(b),d=a.height(),c=this.rowStructs[b].tbodyEl.children();for(f=0;c.length>f;f++){if(g=c.eq(f).removeClass("fc-limited"),g.position().top+g.outerHeight()>d){return f}}return !1},limitRow:function(P,I){function L(a){for(;a>j;){F={row:P,col:j},Q=k.getCellSegs(F,I),Q.length&&(O=H[I-1][j],t=k.renderMoreLink(F,Q),q=ay("<div/>").append(t),O.append(q),B.push(q[0])),j++}}var F,C,H,K,V,R,Q,z,M,O,N,G,J,x,q,t,k=this,U=this.view,A=this.rowStructs[P],B=[],j=0;if(I&&A.segLevels.length>I){for(C=A.segLevels[I-1],H=A.cellMatrix,K=A.tbodyEl.children().slice(I).addClass("fc-limited").get(),V=0;C.length>V;V++){for(R=C[V],L(R.leftCol),M=[],z=0;R.rightCol>=j;){F={row:P,col:j},Q=this.getCellSegs(F,I),M.push(Q),z+=Q.length,j++}if(z){for(O=H[I-1][R.leftCol],N=O.attr("rowspan")||1,G=[],J=0;M.length>J;J++){x=ay('<td class="fc-more-cell"/>').attr("rowspan",N),Q=M[J],F={row:P,col:R.leftCol+J},t=this.renderMoreLink(F,[R].concat(Q)),q=ay("<div/>").append(t),x.append(q),G.push(x[0]),B.push(x[0])}O.addClass("fc-limited").after(ay(G)),K.push(O[0])}}L(U.colCnt),A.moreEls=ay(B),A.limitedEls=ay(K)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(c,d){var a=this,b=this.view;return ay('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(j){var m=b.opt("eventLimitClick"),f=b.cellToDate(c),e=ay(this),n=a.getCellDayEl(c),k=a.getCellSegs(c),g=a.resliceDaySegs(k,f),i=a.resliceDaySegs(d,f);"function"==typeof m&&(m=b.trigger("eventLimitClick",null,{date:f,dayEl:n,moreEl:e,segs:g,hiddenSegs:i},j)),"popover"===m?a.showSegPopover(f,c,e,g):"string"==typeof m&&b.calendar.zoomTo(f,m)})},showSegPopover:function(k,h,d,g){var b,m,c=this,f=this.view,j=d.parent();b=1==f.rowCnt?this.view.el:this.rowEls.eq(h.row),m={className:"fc-more-popover",content:this.renderSegPopoverContent(k,g),parentEl:this.el,top:b.offset().top,autoHide:!0,viewportConstrain:f.opt("popoverViewportConstrain"),hide:function(){c.segPopover.destroy(),c.segPopover=null,c.popoverSegs=null}},f.opt("isRTL")?m.right=j.offset().left+j.outerWidth()+1:m.left=j.offset().left-1,this.segPopover=new aC(m),this.segPopover.show()},renderSegPopoverContent:function(h,k){var d,g=this.view,f=g.opt("theme"),j=h.format(g.opt("dayPopoverFormat")),c=ay('<div class="fc-header '+g.widgetHeaderClass+'"><span class="fc-close '+(f?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+bb(j)+'</span><div class="fc-clear"/></div><div class="fc-body '+g.widgetContentClass+'"><div class="fc-event-container"></div></div>'),b=c.find(".fc-event-container");for(k=this.renderFgSegEls(k,!0),this.popoverSegs=k,d=0;k.length>d;d++){k[d].cellDate=h,b.append(k[d].el)}return c},resliceDaySegs:function(d,f){var a=ay.map(d,function(e){return e.event}),c=f.clone().stripTime(),b=c.clone().add(1,"days");return this.eventsToSegs(a,function(g,h){var i=bt(g,h,c,b);return i?[i]:[]})},getMoreLinkText:function(a){var b=this.view,c=b.opt("eventLimitText");return"function"==typeof c?c(a):"+"+a+" "+c},getCellSegs:function(b,f){for(var g,a=this.rowStructs[b.row].segMatrix,d=f||0,c=[];a.length>d;){g=a[d][b.col],g&&c.push(g),d++}return c}}),bd.prototype=aK(bm.prototype),ay.extend(bd.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),this.renderBusinessHours(),bm.prototype.render.call(this)},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},slatRowHtml:function(){for(var k,e,g,b=this.view,m=b.calendar,d=b.opt("isRTL"),f="",j=0===this.slotDuration.asMinutes()%15,h=aR.duration(+this.minTime);this.maxTime>h;){k=b.start.clone().time(h),e=k.minutes(),g='<td class="fc-axis fc-time '+b.widgetContentClass+'" '+b.axisStyleAttr()+">"+(j&&e?"":"<span>"+bb(m.formatDate(k,b.opt("axisFormat")))+"</span>")+"</td>",f+="<tr "+(e?'class="fc-minor"':"")+">"+(d?"":g)+'<td class="'+b.widgetContentClass+'"/>'+(d?g:"")+"</tr>",h.add(this.slotDuration)}return f},processOptions:function(){var b=this.view,c=b.opt("slotDuration"),a=b.opt("snapDuration");c=aR.duration(c),a=a?aR.duration(a):c,this.slotDuration=c,this.snapDuration=a,this.cellDuration=a,this.minTime=aR.duration(b.opt("minTime")),this.maxTime=aR.duration(b.opt("maxTime"))},rangeToSegs:function(k,h){var d,g,b,m,c,f=this.view,j=[];for(k=k.clone().stripZone(),h=h.clone().stripZone(),g=0;f.colCnt>g;g++){b=f.cellToDate(0,g),m=b.clone().time(this.minTime),c=b.clone().time(this.maxTime),d=bt(k,h,m,c),d&&(d.col=g,j.push(d))}return j},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(k,e){var g,f,h=this.view.colCnt,d=this.el.offset().top,b=aR.duration(+this.minTime),j=null;for(this.dayEls.slice(0,h).each(function(a,c){g=ay(c),f=g.offset().left,j&&(j[1]=f),j=[f],e[a]=j}),j[1]=f+g.outerWidth(),j=null;this.maxTime>b;){f=d+this.computeTimeTop(b),j&&(j[1]=f),j=[f],k.push(j),b.add(this.snapDuration)}j[1]=d+this.computeTimeTop(b)},getCellDate:function(a){var b=this.view,c=b.calendar;return c.rezoneDate(b.cellToDate(0,a.col).time(this.minTime+this.snapDuration*a.row))},getCellDayEl:function(a){return this.dayEls.eq(a.col)},computeDateTop:function(a,b){return this.computeTimeTop(aR.duration(a.clone().stripZone()-b.clone().stripTime()))},computeTimeTop:function(b){var f,g,a,d,c=(b-this.minTime)/this.slotDuration;return c=Math.max(0,c),c=Math.min(this.slatEls.length,c),f=Math.floor(c),g=c-f,a=this.slatTops[f],g?(d=this.slatTops[f+1],a+(d-a)*g):a},computeSlatTops:function(){var a,b=[];this.slatEls.each(function(c,d){a=ay(d).position().top,b.push(a)}),b.push(a+this.slatEls.last().outerHeight()),this.slatTops=b},renderDrag:function(b,c,d){var a;return d?(this.renderRangeHelper(b,c,d),a=this.view.opt("dragOpacity"),void 0!==a&&this.helperEl.css("opacity",a),!0):(this.renderHighlight(b,c||this.view.calendar.getDefaultEventEnd(!1,b)),void 0)},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(a,b,c){this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHelper()},renderHelper:function(f,h){var b,d,c,g,a=this.eventsToSegs([f]);for(a=this.renderFgSegEls(a),b=this.renderSegTable(a),d=0;a.length>d;d++){c=a[d],h&&h.col===c.col&&(g=h.el,c.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")}))}this.helperEl=ay('<div class="fc-helper-skeleton"/>').append(b).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a,b){this.view.opt("selectHelper")?this.renderRangeHelper(a,b):this.renderHighlight(a,b)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(w,k,p){var b,B,j,m,z,y,x,A,q,v,t=this.view;if(k.length){for(k=this.renderFillSegEls(w,k),b=this.groupSegCols(k),p=p||w.toLowerCase(),B=ay('<div class="fc-'+p+'-skeleton"><table><tr/></table></div>'),j=B.find("tr"),m=0;b.length>m;m++){if(z=b[m],y=ay("<td/>").appendTo(j),z.length){for(x=ay('<div class="fc-'+p+'-container"/>').appendTo(y),A=t.cellToDate(0,m),q=0;z.length>q;q++){v=z[q],x.append(v.el.css({top:this.computeDateTop(v.start,A),bottom:-this.computeDateTop(v.end,A)}))}}}this.bookendCells(j,w),this.el.append(B),this.elsByFill[w]=B}return k}}),ay.extend(bd.prototype,{eventSkeletonEl:null,renderFgSegs:function(a){return a=this.renderFgSegEls(a),this.el.append(this.eventSkeletonEl=ay('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a))),a},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(j){var f,h,b,p,d,g,m=ay("<table><tr/></table>"),k=m.find("tr");for(f=this.groupSegCols(j),this.computeSegVerticals(j),p=0;f.length>p;p++){for(d=f[p],bM(d),g=ay('<div class="fc-event-container"/>'),h=0;d.length>h;h++){b=d[h],b.el.css(this.generateSegPositionCss(b)),30>b.bottom-b.top&&b.el.addClass("fc-short"),g.append(b.el)}k.append(ay("<td/>").append(g))}return this.bookendCells(k,"eventSkeleton"),m},updateSegVerticals:function(){var a,b=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(b),a=0;b.length>a;a++){b[a].el.css(this.generateSegVerticalCss(b[a]))}},computeSegVerticals:function(a){var b,c;for(b=0;a.length>b;b++){c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)}},fgSegHtml:function(u,k){var g,j,b,v=this.view,f=u.event,h=v.isEventDraggable(f),q=!k&&u.isEnd&&v.isEventResizable(f),p=this.getSegClasses(u,h,q),m=this.getEventSkinCss(f);return p.unshift("fc-time-grid-event"),v.isMultiDayEvent(f)?(u.isStart||u.isEnd)&&(g=v.getEventTimeText(u.start,u.end),j=v.getEventTimeText(u.start,u.end,"LT"),b=v.getEventTimeText(u.start,null)):(g=v.getEventTimeText(f),j=v.getEventTimeText(f,"LT"),b=v.getEventTimeText(f.start,null)),'<a class="'+p.join(" ")+'"'+(f.url?' href="'+bb(f.url)+'"':"")+(m?' style="'+m+'"':"")+'><div class="fc-content">'+(g?'<div class="fc-time" data-start="'+bb(b)+'" data-full="'+bb(j)+'"><span>'+bb(g)+"</span></div>":"")+(f.title?'<div class="fc-title">'+bb(f.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(q?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(k){var h,d,g=this.view,b=g.opt("isRTL"),m=g.opt("slotEventOverlap"),c=k.backwardCoord,f=k.forwardCoord,j=this.generateSegVerticalCss(k);return m&&(f=Math.min(1,c+2*(f-c))),b?(h=1-f,d=c):(h=c,d=1-f),j.zIndex=k.level+1,j.left=100*h+"%",j.right=100*d+"%",m&&k.forwardPressure&&(j[b?"marginLeft":"marginRight"]=20),j},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(b){var c,d=this.view,a=[];for(c=0;d.colCnt>c;c++){a.push([])}for(c=0;b.length>c;c++){a[b[c].col].push(b[c])}return a}}),a7.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight",this.documentMousedownProxy=ay.proxy(this,"documentMousedown"),this.documentDragStartProxy=ay.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),ay(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),ay(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(){},updateSize:function(a){a&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(a){var b,c=this.el.add(this.scrollerEl);return c.css({position:"relative",left:-1}),b=this.el.outerHeight()-this.scrollerEl.height(),c.css({position:"",left:""}),a-b},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(){this.segEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var a=this.trigger("eventRender",b,b,c);return a===!1?c=null:a&&a!==!0&&(c=ay(a)),c},showEvent:function(a){this.segEach(function(b){b.el.css("visibility","")},a)},hideEvent:function(a){this.segEach(function(b){b.el.css("visibility","hidden")},a)},segEach:function(b,c){var d,a=this.getSegs();for(d=0;a.length>d;d++){c&&a[d].event._id!==c._id||b.call(this,a[d])}},getSegs:function(){},renderDrag:function(){},destroyDrag:function(){},documentDragStart:function(k){var g,j,b,v,f,h=this,q=this.calendar,p=null,m=null,t=null;this.opt("droppable")&&(g=ay(k.target),j=this.opt("dropAccept"),(ay.isFunction(j)?j.call(g[0],g):g.is(j))&&(b=an(g),v=b.eventProps,f=new ba(this.coordMap,{cellOver:function(a,c){p=c,m=b.duration?p.clone().add(b.duration):null,t=m||q.getDefaultEventEnd(!p.hasTime(),p),v&&ay.extend(v,{start:p,end:m}),q.isExternalDragAllowedInRange(p,t,v)?h.renderDrag(p,t):(p=null,aQ())},cellOut:function(){p=null,h.destroyDrag(),aP()}}),ay(document).one("dragstop",function(c,d){var a;h.destroyDrag(),aP(),p&&(b.startTime&&!p.hasTime()&&p.time(b.startTime),h.trigger("drop",g[0],p,c,d),v&&(a=q.renderEvent(v,b.stick),h.trigger("eventReceive",null,a[0])))}),f.startDrag(k)))},select:function(a,b,c){this.unselect(c),this.renderSelection(a,b),this.reportSelection(a,b,c)},renderSelection:function(){},reportSelection:function(a,b,c){this.isSelected=!0,this.trigger("select",null,a,b,c)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(a){var b;this.isSelected&&this.opt("unselectAuto")&&bs(a)&&(b=this.opt("unselectCancel"),b&&ay(a.target).closest(b).length||this.unselect(a))}},ab.dataAttrPrefix="",aI.prototype=aK(a7.prototype),ay.extend(aI.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(a,b,c){this.rowCnt=a,this.colCnt=b,this.dayNumbersVisible=c,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),a7.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),a7.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+bb(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(a){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(a,0))+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(b,c,d){var a;return this.dayNumbersVisible?(a=this.dayGrid.getDayClasses(d),a.unshift("fc-day-number"),'<td class="'+a.join(" ")+'" data-date="'+d.format()+'">'+d.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=aw(this.el.find(".fc-week-number")))},setHeight:function(b,c){var d,a=this.opt("eventLimit");av(this.scrollerEl),aN(this.headRowEl),this.dayGrid.destroySegPopover(),a&&"number"==typeof a&&this.dayGrid.limitRows(a),d=this.computeScrollerHeight(b),this.setGridHeight(d,c),a&&"number"!=typeof a&&this.dayGrid.limitRows(a),!c&&at(this.scrollerEl,d)&&(ax(this.headRowEl,aW(this.scrollerEl)),d=this.computeScrollerHeight(b),this.scrollerEl.height(d),this.restoreScroll())},setGridHeight:function(a,b){b?aG(this.dayGrid.rowEls):aD(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight(),a7.prototype.renderEvents.call(this,a)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){a7.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return this.dayGrid.renderDrag(a,b,c)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a,b){this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.dayGrid.destroySelection()}}),aA({fixedWeekCount:!0}),bP.month=bK,bK.prototype=aK(aI.prototype),ay.extend(bK.prototype,{name:"month",incrementDate:function(a,b){return a.clone().stripTime().add(b,"months").startOf("month")},render:function(a){var b;this.intervalStart=a.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),b=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-b,"weeks"),b=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),aI.prototype.render.call(this,b,this.getCellsPerWeek(),!0)},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),aD(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}}),bP.basicWeek=bg,bg.prototype=aK(aI.prototype),ay.extend(bg.prototype,{name:"basicWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),aI.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),bP.basicDay=bF,bF.prototype=aK(aI.prototype),ay.extend(bF.prototype,{name:"basicDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,0>b?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),aI.prototype.render.call(this,1,1,!1)}}),aA({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:bS,timeFormat:{agenda:ad},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var bA=5;bR.prototype=aK(a7.prototype),ay.extend(bR.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(a){this.rowCnt=1,this.colCnt=a,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=ay('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),a7.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),a7.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var b,c,d,a;return this.opt("weekNumbers")?(b=this.cellToDate(0,0),c=this.calendar.calculateWeekNumber(b),d=this.opt("weekNumberTitle"),a=this.opt("isRTL")?c+d:d+c,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+bb(a)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||bb(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize(),a7.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=aw(this.el.find(".fc-axis"))},setHeight:function(b,c){var d,a;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),av(this.scrollerEl),aN(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),d=this.opt("eventLimit"),d&&"number"!=typeof d&&(d=bA),d&&this.dayGrid.limitRows(d)),c||(a=this.computeScrollerHeight(b),at(this.scrollerEl,a)?(ax(this.noScrollRowEls,aW(this.scrollerEl)),a=this.computeScrollerHeight(b),this.scrollerEl.height(a),this.restoreScroll()):(this.scrollerEl.height(a).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function b(){d.scrollerEl.scrollTop(c)}var d=this,a=aR.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);c=Math.ceil(c),c&&c++,b(),setTimeout(b,0)},renderEvents:function(b){var f,g,a=[],d=[],c=[];for(g=0;b.length>g;g++){b[g].allDay?a.push(b[g]):d.push(b[g])}f=this.timeGrid.renderEvents(d),this.dayGrid&&(c=this.dayGrid.renderEvents(a)),this.updateHeight(),a7.prototype.renderEvents.call(this,b)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){a7.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return a.hasTime()?this.timeGrid.renderDrag(a,b,c):this.dayGrid?this.dayGrid.renderDrag(a,b,c):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a,b){a.hasTime()||b.hasTime()?this.timeGrid.renderSelection(a,b):this.dayGrid&&this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),bP.agendaWeek=aj,aj.prototype=aK(bR.prototype),ay.extend(aj.prototype,{name:"agendaWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),bR.prototype.render.call(this,this.getCellsPerWeek())}}),bP.agendaDay=aV,aV.prototype=aK(bR.prototype),ay.extend(aV.prototype,{name:"agendaDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,0>b?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),bR.prototype.render.call(this,1)}})});